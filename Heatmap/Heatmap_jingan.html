<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=gh9u1qMjV72Wgif2b5mSWxabPMW1IhW7"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:80%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:800px;width:100%;}
		#r-result{width:100%;}
    </style>	
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(121.45, 31.35);
    map.centerAndZoom(point, 13);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
  
    var points =[{'lat': 31.222704, 'lng': 121.4450372, 'count': 90656.0}, {'lat': 31.24521285, 'lng': 121.449014, 'count': 82701.0}, {'lat': 31.27830535, 'lng': 121.453492, 'count': 99845.54545}, {'lat': 31.30677123, 'lng': 121.437752, 'count': 62058.75}, {'lat': 31.26224488, 'lng': 121.4850047, 'count': 76872.66667}, {'lat': 31.26675688, 'lng': 121.4782314, 'count': 69864.0}, {'lat': 31.28677187, 'lng': 121.460622, 'count': 111421.0}, {'lat': 31.26195912, 'lng': 121.4845866, 'count': 82003.0}, {'lat': 31.2652404, 'lng': 121.4818143, 'count': 68606.0}, {'lat': 31.26531109, 'lng': 121.4817761, 'count': 65572.0}, {'lat': 31.32152889, 'lng': 121.450119, 'count': 57622.5}, {'lat': 31.32262191, 'lng': 121.457929, 'count': 62491.33333}, {'lat': 31.32168645, 'lng': 121.4556221, 'count': 57849.0}, {'lat': 31.32331992, 'lng': 121.4700683, 'count': 59946.0}, {'lat': 31.32137072, 'lng': 121.4651443, 'count': 53461.0}, {'lat': 31.32104812, 'lng': 121.458039, 'count': 60792.0}, {'lat': 31.28407824, 'lng': 121.4321429, 'count': 66027.4}, {'lat': 31.26440846, 'lng': 121.465179, 'count': 82997.0}, {'lat': 31.25019762, 'lng': 121.4717651, 'count': 58289.0}, {'lat': 31.2630114, 'lng': 121.4836852, 'count': 81022.0}, {'lat': 31.26236982, 'lng': 121.4655036, 'count': 77416.0}, {'lat': 31.23216728, 'lng': 121.4608215, 'count': 91745.0}, {'lat': 31.23943508, 'lng': 121.4439642, 'count': 94036.0}, {'lat': 0.0, 'lng': 0.0, 'count': 59291.0}, {'lat': 31.3119865, 'lng': 121.4472012, 'count': 58907.0}, {'lat': 31.3124849, 'lng': 121.457514, 'count': 53686.75}, {'lat': 31.32551941, 'lng': 121.4690487, 'count': 55741.66667}, {'lat': 31.23397685, 'lng': 121.445321, 'count': 104352.0}, {'lat': 31.23773754, 'lng': 121.4364986, 'count': 108379.0}, {'lat': 31.27735316, 'lng': 121.4532044, 'count': 123618.6667}, {'lat': 31.27883719, 'lng': 121.4554141, 'count': 103011.5}, {'lat': 31.27471944, 'lng': 121.452701, 'count': 109999.0}, {'lat': 31.83559998, 'lng': 121.3384021, 'count': 82161.16667}, {'lat': 31.24108953, 'lng': 121.450301, 'count': 86609.0}, {'lat': 31.28217196, 'lng': 121.4559162, 'count': 101516.6}, {'lat': 31.26384112, 'lng': 121.4732866, 'count': 77323.66667}, {'lat': 31.28288863, 'lng': 121.4405108, 'count': 80325.0}, {'lat': 31.31232887, 'lng': 121.4651188, 'count': 62604.0}, {'lat': 31.32079007, 'lng': 121.4698073, 'count': 61395.0}, {'lat': 31.25977997, 'lng': 121.4822487, 'count': 121749.1429}, {'lat': 31.2564549, 'lng': 121.471795, 'count': 90006.0}, {'lat': 31.24640957, 'lng': 121.4542237, 'count': 78427.0}, {'lat': 31.23376272, 'lng': 121.4392631, 'count': 93455.07143}, {'lat': 31.27777389, 'lng': 121.448598, 'count': 108560.0}, {'lat': 31.25924911, 'lng': 121.4818684, 'count': 81481.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 85493.66667}, {'lat': 31.32252784, 'lng': 121.4557857, 'count': 57047.33333}, {'lat': 31.32460402, 'lng': 121.457606, 'count': 56190.25}, {'lat': 31.32033536, 'lng': 121.4437863, 'count': 58110.08333}, {'lat': 31.32392106, 'lng': 121.4427361, 'count': 57379.38462}, {'lat': 31.26977286, 'lng': 121.465679, 'count': 66175.0}, {'lat': 31.25758884, 'lng': 121.4729519, 'count': 88635.0}, {'lat': 31.28002484, 'lng': 121.4385691, 'count': 73942.0}, {'lat': 31.28016634, 'lng': 121.4409861, 'count': 80383.66667}, {'lat': 31.28362235, 'lng': 121.4433462, 'count': 89905.0}, {'lat': 31.23963755, 'lng': 121.465945, 'count': 158834.5}, {'lat': 31.24490535, 'lng': 121.4515001, 'count': 175629.1765}, {'lat': 31.24228723, 'lng': 121.4965742, 'count': 113966.0}, {'lat': 31.24560857, 'lng': 121.4558318, 'count': 83190.0}, {'lat': 31.2503174, 'lng': 121.4768934, 'count': 83940.0}, {'lat': 31.24938522, 'lng': 121.4664434, 'count': 86787.6}, {'lat': 31.27373113, 'lng': 121.4662553, 'count': 81218.0}, {'lat': 31.26394746, 'lng': 121.4582279, 'count': 78119.66667}, {'lat': 31.31656458, 'lng': 121.458187, 'count': 60802.0}, {'lat': 31.26958149, 'lng': 121.472746, 'count': 86417.0}, {'lat': 31.32376436, 'lng': 121.4730627, 'count': 66064.1}, {'lat': 31.28507457, 'lng': 121.4420164, 'count': 99418.0}, {'lat': 31.25465185, 'lng': 121.473918, 'count': 87952.0}, {'lat': 30.73150071, 'lng': 121.3513781, 'count': 59632.0}, {'lat': 31.24335587, 'lng': 121.465219, 'count': 88408.0}, {'lat': 31.24079907, 'lng': 121.4463704, 'count': 79544.0}, {'lat': 31.26482053, 'lng': 121.4764628, 'count': 64517.0}, {'lat': 31.24556272, 'lng': 121.4551485, 'count': 83235.0}, {'lat': 31.24061282, 'lng': 121.43843, 'count': 85814.0}, {'lat': 31.24954692, 'lng': 121.4754305, 'count': 98756.0}, {'lat': 31.22653485, 'lng': 121.4125333, 'count': 221580.0}, {'lat': 31.24156091, 'lng': 121.452926, 'count': 70493.33333}, {'lat': 31.26127779, 'lng': 121.4595596, 'count': 66006.0}, {'lat': 31.23385697, 'lng': 121.471158, 'count': 113028.5}, {'lat': 30.00440738, 'lng': 101.9635552, 'count': 112850.0}, {'lat': 31.28771502, 'lng': 121.4660734, 'count': 123471.3}, {'lat': 31.27883788, 'lng': 121.442437, 'count': 87943.0}, {'lat': 31.27945991, 'lng': 121.470287, 'count': 102142.3333}, {'lat': 31.28284998, 'lng': 121.4418101, 'count': 80472.75}, {'lat': 31.23060446, 'lng': 121.4422953, 'count': 117904.0}, {'lat': 31.27625036, 'lng': 121.456652, 'count': 74775.0}, {'lat': 31.24157989, 'lng': 121.450262, 'count': 85012.0}, {'lat': 31.26849255, 'lng': 121.4544602, 'count': 70208.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 140555.0}, {'lat': 31.33612791, 'lng': 121.484627, 'count': 129679.6667}, {'lat': 31.26022687, 'lng': 121.457847, 'count': 137159.0}, {'lat': 31.23401267, 'lng': 121.4471324, 'count': 103793.5}, {'lat': 31.27292416, 'lng': 121.456516, 'count': 88286.75}, {'lat': 31.27426034, 'lng': 121.4560502, 'count': 94664.75}, {'lat': 31.24110967, 'lng': 121.4444001, 'count': 83681.0}, {'lat': 31.25574991, 'lng': 121.471481, 'count': 95392.2}, {'lat': 31.28435398, 'lng': 121.4355992, 'count': 64620.25}, {'lat': 31.32649309, 'lng': 121.4641642, 'count': 58330.0}, {'lat': 31.23147314, 'lng': 121.4377231, 'count': 83524.5}, {'lat': 31.30041188, 'lng': 121.45099, 'count': 140383.8182}, {'lat': 31.29894239, 'lng': 121.448192, 'count': 136644.1}, {'lat': 31.23918623, 'lng': 121.4533846, 'count': 166181.6667}, {'lat': 31.24774089, 'lng': 121.457394, 'count': 100038.0}, {'lat': 31.24591552, 'lng': 121.4509268, 'count': 158387.6667}, {'lat': 31.24267138, 'lng': 121.4565205, 'count': 108996.0}, {'lat': 31.23745163, 'lng': 121.4431202, 'count': 110398.0}, {'lat': 31.23230692, 'lng': 121.4352529, 'count': 72348.0}, {'lat': 31.24044285, 'lng': 121.459686, 'count': 93103.66667}, {'lat': 31.23674812, 'lng': 121.4387357, 'count': 115936.0}, {'lat': 31.27292045, 'lng': 121.453659, 'count': 89678.42857}, {'lat': 31.26634743, 'lng': 121.4796068, 'count': 62378.0}, {'lat': 31.25437749, 'lng': 121.4774185, 'count': 76204.0}, {'lat': 31.24698682, 'lng': 121.4557708, 'count': 91585.14286}, {'lat': 31.23483485, 'lng': 121.461047, 'count': 83743.4}, {'lat': 31.23993565, 'lng': 121.4543546, 'count': 90278.5}, {'lat': 31.2372321, 'lng': 121.4470367, 'count': 89148.0}, {'lat': 31.31847695, 'lng': 121.4566023, 'count': 61550.42857}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 56014.0}, {'lat': 31.27671792, 'lng': 121.4573434, 'count': 98306.5}, {'lat': 31.23364461, 'lng': 121.4358595, 'count': 114457.6}, {'lat': 31.27364615, 'lng': 121.4581342, 'count': 89998.0}, {'lat': 31.27247485, 'lng': 121.471451, 'count': 66728.0}, {'lat': 31.27306852, 'lng': 121.4551464, 'count': 85918.66667}, {'lat': 31.24975245, 'lng': 121.4872668, 'count': 101591.3333}, {'lat': 31.2769899, 'lng': 121.698774, 'count': 70279.66667}, {'lat': 31.24242292, 'lng': 121.4545064, 'count': 88297.0}, {'lat': 31.3130528, 'lng': 121.4719671, 'count': 62206.0}, {'lat': 31.31754437, 'lng': 121.4488143, 'count': 56981.0}, {'lat': 31.31761872, 'lng': 121.4453042, 'count': 58728.0}, {'lat': 31.3142984, 'lng': 121.4439953, 'count': 57189.44444}, {'lat': 31.31826393, 'lng': 121.4431481, 'count': 59286.25}, {'lat': 31.31590146, 'lng': 121.443824, 'count': 55395.0}, {'lat': 31.31936841, 'lng': 121.4725497, 'count': 65563.0}, {'lat': 0.0, 'lng': 0.0, 'count': 55119.0}, {'lat': 31.37567989, 'lng': 121.4918289, 'count': 58408.0}, {'lat': 31.32086249, 'lng': 121.4601321, 'count': 60221.0}, {'lat': 31.26827387, 'lng': 121.4565598, 'count': 87958.33333}, {'lat': 31.27431566, 'lng': 121.4708411, 'count': 71027.25}, {'lat': 31.27481674, 'lng': 121.4681732, 'count': 74645.6}, {'lat': 31.28865838, 'lng': 121.4309414, 'count': 75051.0}, {'lat': 43.90674314, 'lng': 126.5654829, 'count': 68031.375}, {'lat': 31.27495632, 'lng': 121.4671106, 'count': 69556.5}, {'lat': 31.27070761, 'lng': 121.4560535, 'count': 92398.875}, {'lat': 31.2716851, 'lng': 121.4571212, 'count': 95867.375}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 92299.0}, {'lat': 31.27924565, 'lng': 121.4261008, 'count': 80283.33333}, {'lat': 31.27172268, 'lng': 121.4592319, 'count': 73508.0}, {'lat': 31.280257, 'lng': 121.4543635, 'count': 117443.3333}, {'lat': 31.23758339, 'lng': 121.4498343, 'count': 101311.0}, {'lat': 31.27521264, 'lng': 121.4940595, 'count': 82450.0}, {'lat': 31.38424061, 'lng': 121.287217, 'count': 84539.0}, {'lat': 31.28426502, 'lng': 121.4402181, 'count': 81164.0}, {'lat': 31.26495689, 'lng': 121.4807064, 'count': 117365.5}, {'lat': 31.24412494, 'lng': 121.4471494, 'count': 91035.0}, {'lat': 31.26108563, 'lng': 121.4815804, 'count': 105842.0}, {'lat': 31.2951469, 'lng': 121.460433, 'count': 108224.0}, {'lat': 31.26301271, 'lng': 121.4735376, 'count': 75806.0}, {'lat': 31.26289688, 'lng': 121.4725679, 'count': 80655.83333}, {'lat': 22.50435845, 'lng': 113.9022938, 'count': 70045.33333}, {'lat': 31.23243746, 'lng': 121.4347124, 'count': 113062.3333}, {'lat': 31.23136661, 'lng': 121.4358624, 'count': 125528.4}, {'lat': 31.27889745, 'lng': 121.4569048, 'count': 113358.4286}, {'lat': 31.31585233, 'lng': 121.445925, 'count': 59729.83333}, {'lat': 31.31292322, 'lng': 121.4601386, 'count': 57558.33333}, {'lat': 31.31576788, 'lng': 121.453412, 'count': 60038.5}, {'lat': 31.32334152, 'lng': 121.4604351, 'count': 58625.0}, {'lat': 31.32416314, 'lng': 121.4589546, 'count': 59027.33333}, {'lat': 31.32487664, 'lng': 121.4603472, 'count': 60430.0}, {'lat': 31.32523932, 'lng': 121.4617196, 'count': 57766.0}, {'lat': 31.31855523, 'lng': 121.4603519, 'count': 57642.5}, {'lat': 31.27650161, 'lng': 121.4727344, 'count': 71882.0}, {'lat': 31.28198938, 'lng': 121.4674185, 'count': 83120.0}, {'lat': 31.24708384, 'lng': 121.47646, 'count': 85882.0}, {'lat': 31.29135181, 'lng': 121.4300728, 'count': 79984.0}, {'lat': 31.26632436, 'lng': 121.4603731, 'count': 76764.5}, {'lat': 31.26818467, 'lng': 121.4771233, 'count': 68698.6}, {'lat': 31.31603111, 'lng': 121.447495, 'count': 57683.0}, {'lat': 31.26934105, 'lng': 121.4715563, 'count': 88353.0}, {'lat': 31.3268934, 'lng': 121.4693546, 'count': 66003.0}, {'lat': 31.26317778, 'lng': 121.4832078, 'count': 73015.0}, {'lat': 31.23474214, 'lng': 121.4463436, 'count': 94288.8}, {'lat': 31.24524071, 'lng': 121.4580246, 'count': 94506.33333}, {'lat': 31.31903393, 'lng': 121.4509755, 'count': 60043.0}, {'lat': 31.31953962, 'lng': 121.4456771, 'count': 54517.25}, {'lat': 31.32475078, 'lng': 121.4448846, 'count': 51441.0}, {'lat': 31.31382469, 'lng': 121.4486259, 'count': 58396.66667}, {'lat': 31.31682927, 'lng': 121.4486681, 'count': 58677.0}, {'lat': 31.25824255, 'lng': 121.4673799, 'count': 70608.0}, {'lat': 31.27181323, 'lng': 121.4752119, 'count': 74220.33333}, {'lat': 31.6111091, 'lng': 121.6255478, 'count': 70377.0}, {'lat': 31.28106187, 'lng': 121.4601551, 'count': 87002.85714}, {'lat': 31.26733685, 'lng': 121.460777, 'count': 112084.25}, {'lat': 31.23962188, 'lng': 121.471639, 'count': 125847.0}, {'lat': 31.27094881, 'lng': 121.470965, 'count': 75084.0}, {'lat': 31.27120662, 'lng': 121.4674503, 'count': 74510.0}, {'lat': 31.24056249, 'lng': 121.4607643, 'count': 94093.0}, {'lat': 31.25219686, 'lng': 121.485528, 'count': 146584.3333}, {'lat': 31.21356088, 'lng': 121.487726, 'count': 78715.0}, {'lat': 31.31276141, 'lng': 121.4711128, 'count': 59867.33333}, {'lat': 31.28325318, 'lng': 121.4606058, 'count': 84728.0}, {'lat': 31.22839973, 'lng': 121.4618439, 'count': 126345.0}, {'lat': 31.23357738, 'lng': 121.4476677, 'count': 107635.0}, {'lat': 31.2639213, 'lng': 121.4645519, 'count': 82606.5}, {'lat': 31.24224115, 'lng': 121.4614592, 'count': 162928.3333}, {'lat': 31.2669146, 'lng': 121.4562719, 'count': 71232.83333}, {'lat': 31.26726594, 'lng': 121.4586388, 'count': 75224.0}, {'lat': 31.26659205, 'lng': 121.4592462, 'count': 74843.0}, {'lat': 31.23959841, 'lng': 121.4842657, 'count': 80189.5}, {'lat': 31.25098685, 'lng': 121.475307, 'count': 63952.0}, {'lat': 31.27442284, 'lng': 121.4726762, 'count': 107151.0}, {'lat': 31.23667617, 'lng': 121.4439935, 'count': 114601.4375}, {'lat': 31.27473302, 'lng': 121.4579213, 'count': 98462.0}, {'lat': 31.23476723, 'lng': 121.4441203, 'count': 128338.8}, {'lat': 31.23165162, 'lng': 121.4429612, 'count': 108273.0}, {'lat': 31.23219013, 'lng': 121.438129, 'count': 103196.0}, {'lat': 31.23528017, 'lng': 121.4393211, 'count': 65356.66667}, {'lat': 31.29276198, 'lng': 121.4436413, 'count': 65678.5}, {'lat': 31.29645508, 'lng': 121.4477624, 'count': 81062.33333}, {'lat': 31.31441525, 'lng': 121.4509858, 'count': 59836.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 58270.5}, {'lat': 31.26260449, 'lng': 121.4645768, 'count': 108183.0}, {'lat': 31.24013202, 'lng': 121.4559263, 'count': 88937.5}, {'lat': 31.24226886, 'lng': 121.462729, 'count': 89959.0}, {'lat': 31.29450701, 'lng': 121.439117, 'count': 57926.33333}, {'lat': 25.27466838, 'lng': 110.3008996, 'count': 83072.6}, {'lat': 31.26155205, 'lng': 121.4654459, 'count': 73123.0}, {'lat': 31.15495709, 'lng': 121.1236741, 'count': 61048.0}, {'lat': 31.26998899, 'lng': 121.4637877, 'count': 87255.0}, {'lat': 31.32003737, 'lng': 121.4521778, 'count': 57365.0}, {'lat': 31.32055794, 'lng': 121.4558029, 'count': 62246.5}, {'lat': 31.24328208, 'lng': 121.4463128, 'count': 87088.25}, {'lat': 31.2748689, 'lng': 121.4600161, 'count': 91001.0}, {'lat': 31.2553888, 'lng': 121.4777882, 'count': 95921.0}, {'lat': 31.26889882, 'lng': 121.4802231, 'count': 122821.0}, {'lat': 31.28602838, 'lng': 121.4568876, 'count': 103658.7692}, {'lat': 31.23434537, 'lng': 121.4476898, 'count': 99770.0}, {'lat': 31.32201583, 'lng': 121.4615508, 'count': 58431.0}, {'lat': 31.63277128, 'lng': 121.4441447, 'count': 57457.0}, {'lat': 31.31978155, 'lng': 121.453517, 'count': 57817.0}, {'lat': 31.32248572, 'lng': 121.4465964, 'count': 59601.5}, {'lat': 31.30916888, 'lng': 121.444942, 'count': 62358.0}, {'lat': 31.31036609, 'lng': 121.4496037, 'count': 58474.0}, {'lat': 31.28267168, 'lng': 121.4677865, 'count': 85274.33333}, {'lat': 31.23417887, 'lng': 121.448065, 'count': 81984.0}, {'lat': 31.23666614, 'lng': 121.4465617, 'count': 136707.0}, {'lat': 31.22814737, 'lng': 121.4363403, 'count': 130731.5}, {'lat': 31.27540214, 'lng': 121.4620158, 'count': 85446.0}, {'lat': 31.27665419, 'lng': 121.4585405, 'count': 87822.0}, {'lat': 31.12685126, 'lng': 121.4053529, 'count': 59198.0}, {'lat': 31.28951904, 'lng': 121.4326563, 'count': 86547.66667}, {'lat': 31.28766911, 'lng': 121.4332123, 'count': 72659.0}, {'lat': 31.32469286, 'lng': 121.464343, 'count': 58700.0}, {'lat': 31.32061501, 'lng': 121.4672083, 'count': 58674.0}, {'lat': 31.32289091, 'lng': 121.467093, 'count': 58054.0}, {'lat': 31.31817786, 'lng': 121.46862, 'count': 58892.42857}, {'lat': 31.23896585, 'lng': 121.4421, 'count': 95258.8}, {'lat': 31.3272243, 'lng': 121.4499516, 'count': 68820.77778}, {'lat': 31.23663565, 'lng': 121.4460321, 'count': 101277.5}, {'lat': 31.32401762, 'lng': 121.4463791, 'count': 60321.0}, {'lat': 31.32383292, 'lng': 121.448593, 'count': 57913.0}, {'lat': 31.29853702, 'lng': 121.4359737, 'count': 63390.25}, {'lat': 31.30179712, 'lng': 121.4382191, 'count': 63903.33333}, {'lat': 31.29175878, 'lng': 121.437022, 'count': 73899.75}, {'lat': 31.29397313, 'lng': 121.4452944, 'count': 69328.0}, {'lat': 31.30112379, 'lng': 121.4362462, 'count': 63764.5}, {'lat': 31.29336089, 'lng': 121.436299, 'count': 68204.0}, {'lat': 31.27190671, 'lng': 121.4532395, 'count': 94464.9}, {'lat': 31.28934523, 'lng': 121.436161, 'count': 78464.0}, {'lat': 31.24974535, 'lng': 121.4700899, 'count': 83832.0}, {'lat': 31.27273388, 'lng': 121.4587797, 'count': 107730.0}, {'lat': 31.23384493, 'lng': 121.4534318, 'count': 101053.8571}, {'lat': 31.23975117, 'lng': 121.4413276, 'count': 88692.0}, {'lat': 31.22697342, 'lng': 121.4435505, 'count': 101170.0}, {'lat': 31.27895547, 'lng': 121.4331367, 'count': 63972.0}, {'lat': 31.26137317, 'lng': 121.4645231, 'count': 79390.5}, {'lat': 31.30839787, 'lng': 121.4692027, 'count': 74179.4}, {'lat': 31.29467001, 'lng': 121.4667401, 'count': 80865.5}, {'lat': 31.23484203, 'lng': 121.4709948, 'count': 121305.0}, {'lat': 31.31111217, 'lng': 121.4475029, 'count': 59063.0}, {'lat': 31.25111111, 'lng': 121.4586113, 'count': 55005.0}, {'lat': 31.25530638, 'lng': 121.4730296, 'count': 78565.0}, {'lat': 31.23863687, 'lng': 121.44359, 'count': 93136.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 84984.0}, {'lat': 31.27377423, 'lng': 121.4712767, 'count': 73208.4}, {'lat': 31.2651532, 'lng': 121.4759423, 'count': 78213.0}, {'lat': 31.26548803, 'lng': 121.4757352, 'count': 70954.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 75719.0}, {'lat': 31.26367876, 'lng': 121.4667518, 'count': 76582.0}, {'lat': 31.26319028, 'lng': 121.4638275, 'count': 81478.0}, {'lat': 31.26521903, 'lng': 121.4761893, 'count': 76054.0}, {'lat': 31.2612284, 'lng': 121.4619846, 'count': 78767.0}, {'lat': 31.23279904, 'lng': 121.4718777, 'count': 132480.2}, {'lat': 31.27038484, 'lng': 121.475518, 'count': 72421.0}, {'lat': 31.26770617, 'lng': 121.4643302, 'count': 82398.5}, {'lat': 31.26561443, 'lng': 121.4596595, 'count': 69349.0}, {'lat': 25.07187408, 'lng': 121.5544634, 'count': 71305.5}, {'lat': 31.30281586, 'lng': 121.4318738, 'count': 86688.0}, {'lat': 31.52981266, 'lng': 121.7646767, 'count': 103174.3333}, {'lat': 31.32285975, 'lng': 121.4534751, 'count': 60368.0}, {'lat': 31.26324414, 'lng': 121.4688442, 'count': 78857.5}];


	if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"visible":true}, {"radius":1}, {"opacity":30});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:150000});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		
		}*/
     	var gradient = {
			0.5:'rgb(102, 255, 0)',
	 	 	0.5:'rgb(255, 170, 0)',
		  	0.8:'rgb(255, 0, 0)'
		 };
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value; 
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>