<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=gh9u1qMjV72Wgif2b5mSWxabPMW1IhW7"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>
    <title>热力图功能示例</title>
    <style type="text/css">
		ul,li{list-style: none;margin:0;padding:0;float:left;}
		html{height:100%}
		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}
		#container{height:800px;width:100%;}
		#r-result{width:100%;}
    </style>	
</head>
<body>
	<div id="container"></div>
	<div id="r-result">
		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>
	</div>
</body>
</html>
<script type="text/javascript">
    var map = new BMap.Map("container");          // 创建地图实例

    var point = new BMap.Point(121.4, 31.22);
    map.centerAndZoom(point, 15);             // 初始化地图，设置中心点坐标和地图级别
    map.enableScrollWheelZoom(); // 允许滚轮缩放
  
    var points =[{'lat': 31.2210219, 'lng': 121.432434, 'count': 75235.0}, {'lat': 31.21759083, 'lng': 121.3997849, 'count': 60022.0}, {'lat': 31.20685365, 'lng': 121.4230829, 'count': 77855.2}, {'lat': 31.2062269, 'lng': 121.4156633, 'count': 74033.0}, {'lat': 31.22171387, 'lng': 121.4274207, 'count': 77307.0}, {'lat': 31.21085518, 'lng': 121.4304634, 'count': 112650.0}, {'lat': 31.19485726, 'lng': 121.378638, 'count': 66740.8}, {'lat': 31.20114881, 'lng': 121.3991475, 'count': 73700.33333}, {'lat': 0.0, 'lng': 0.0, 'count': 67590.0}, {'lat': 31.22752021, 'lng': 121.3697843, 'count': 81695.0}, {'lat': 31.22417639, 'lng': 121.4397089, 'count': 93825.33333}, {'lat': 31.21602785, 'lng': 121.434996, 'count': 95649.0}, {'lat': 31.19595053, 'lng': 121.3818181, 'count': 67017.0}, {'lat': 31.21231246, 'lng': 121.372835, 'count': 64320.0}, {'lat': 31.14147845, 'lng': 121.5895528, 'count': 107164.6667}, {'lat': 31.22773814, 'lng': 121.4188053, 'count': 107791.0}, {'lat': 31.21484919, 'lng': 121.4053398, 'count': 77653.66667}, {'lat': 0.0, 'lng': 0.0, 'count': 79146.16667}, {'lat': 31.21940926, 'lng': 121.4446583, 'count': 110741.0}, {'lat': 31.22140861, 'lng': 121.3606168, 'count': 68856.66667}, {'lat': 31.22100098, 'lng': 121.4288858, 'count': 79412.0}, {'lat': 31.20920684, 'lng': 121.429354, 'count': 91320.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 90600.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 82703.0}, {'lat': 31.21343881, 'lng': 121.4323189, 'count': 92510.0}, {'lat': 31.22493319, 'lng': 121.4393585, 'count': 93608.0}, {'lat': 31.21654939, 'lng': 121.4008329, 'count': 74630.0}, {'lat': 31.26013836, 'lng': 121.4280959, 'count': 87409.0}, {'lat': 31.29916686, 'lng': 121.3183252, 'count': 98289.0}, {'lat': 31.2106623, 'lng': 121.4321874, 'count': 88201.0}, {'lat': 0.0, 'lng': 0.0, 'count': 89588.5}, {'lat': 31.21547782, 'lng': 121.4195801, 'count': 76362.0}, {'lat': 22.94538344, 'lng': 113.3888786, 'count': 77661.44444}, {'lat': 31.21318425, 'lng': 121.4331427, 'count': 79014.2}, {'lat': 31.21328755, 'lng': 121.4347164, 'count': 81725.5}, {'lat': 31.22814289, 'lng': 121.419847, 'count': 85160.0}, {'lat': 31.21360465, 'lng': 121.4006729, 'count': 72776.6}, {'lat': 31.21116356, 'lng': 121.4013947, 'count': 73546.0}, {'lat': 30.98840084, 'lng': 121.8764365, 'count': 71888.0}, {'lat': 31.22314096, 'lng': 121.4324325, 'count': 101824.0}, {'lat': 31.21024589, 'lng': 121.43777, 'count': 97656.66667}, {'lat': 31.20536609, 'lng': 121.3654577, 'count': 105510.0}, {'lat': 31.19979058, 'lng': 121.4125153, 'count': 123064.0}, {'lat': 31.20001112, 'lng': 121.4151248, 'count': 111132.2857}, {'lat': 31.20182286, 'lng': 121.4131388, 'count': 114693.5}, {'lat': 31.22120163, 'lng': 121.4050804, 'count': 78865.0}, {'lat': 31.21683861, 'lng': 121.3957822, 'count': 84120.14286}, {'lat': 31.22139696, 'lng': 121.3657545, 'count': 70584.0}, {'lat': 31.22655785, 'lng': 121.43255, 'count': 88869.5}, {'lat': 31.22204168, 'lng': 121.3906642, 'count': 98584.0}, {'lat': 31.21524419, 'lng': 121.4381134, 'count': 90251.5}, {'lat': 31.22281625, 'lng': 121.3855872, 'count': 93212.0}, {'lat': 31.22090787, 'lng': 121.393654, 'count': 100962.0}, {'lat': 31.22119985, 'lng': 121.370462, 'count': 71384.0}, {'lat': 31.22604, 'lng': 121.4191839, 'count': 90705.0}, {'lat': 31.20297667, 'lng': 121.4211814, 'count': 80511.0}, {'lat': 31.20800863, 'lng': 121.3955886, 'count': 74491.83333}, {'lat': 31.21060663, 'lng': 121.3946949, 'count': 67368.33333}, {'lat': 31.20901404, 'lng': 121.3996766, 'count': 74048.0}, {'lat': 31.20849663, 'lng': 121.4052491, 'count': 81734.0}, {'lat': 31.21547983, 'lng': 121.373509, 'count': 90099.5}, {'lat': 31.21838351, 'lng': 121.3768126, 'count': 89657.0}, {'lat': 31.21559232, 'lng': 121.3704529, 'count': 83376.0}, {'lat': 31.21467763, 'lng': 121.5476567, 'count': 73093.83333}, {'lat': 31.19043748, 'lng': 121.5614707, 'count': 77005.625}, {'lat': 31.19824221, 'lng': 121.4169731, 'count': 111699.25}, {'lat': 31.20334686, 'lng': 121.346817, 'count': 53812.41176}, {'lat': 31.20314508, 'lng': 121.4253171, 'count': 74938.0}, {'lat': 31.18756583, 'lng': 121.424833, 'count': 81056.0}, {'lat': 31.2230162, 'lng': 121.4066388, 'count': 102783.0}, {'lat': 31.20487445, 'lng': 121.416997, 'count': 81342.0}, {'lat': 31.22221461, 'lng': 121.4130495, 'count': 96586.0}, {'lat': 39.95496778, 'lng': 116.4824974, 'count': 95139.0}, {'lat': 31.19947459, 'lng': 121.3754088, 'count': 79075.5}, {'lat': 31.2072029, 'lng': 121.397445, 'count': 74772.6}, {'lat': 31.21024211, 'lng': 121.39618, 'count': 74644.2}, {'lat': 31.21072708, 'lng': 121.3913189, 'count': 72041.0}, {'lat': 31.19851364, 'lng': 121.4249106, 'count': 72888.5}, {'lat': 31.20914005, 'lng': 121.3918037, 'count': 70195.0}, {'lat': 31.20859183, 'lng': 121.393025, 'count': 72837.57143}, {'lat': 31.19732889, 'lng': 121.3925, 'count': 74147.33333}, {'lat': 31.20430884, 'lng': 121.4197151, 'count': 81045.5}, {'lat': 31.21988667, 'lng': 121.3779592, 'count': 77445.0}, {'lat': 31.21695032, 'lng': 121.3728038, 'count': 68895.85714}, {'lat': 31.14171984, 'lng': 121.41106, 'count': 68846.0}, {'lat': 31.2308098, 'lng': 121.4263518, 'count': 77430.0}, {'lat': 31.22284489, 'lng': 121.4409109, 'count': 87207.0}, {'lat': 31.20975706, 'lng': 121.4419314, 'count': 95049.33333}, {'lat': 31.21500554, 'lng': 121.3675629, 'count': 60977.5}, {'lat': 31.21534533, 'lng': 121.3637919, 'count': 57377.33333}, {'lat': 31.23017863, 'lng': 121.4267156, 'count': 84576.0}, {'lat': 31.23048883, 'lng': 121.4289111, 'count': 80383.0}, {'lat': 31.23122712, 'lng': 121.4274088, 'count': 89714.0}, {'lat': 31.22190186, 'lng': 121.416146, 'count': 87434.66667}, {'lat': 31.21343695, 'lng': 121.4308144, 'count': 81098.0}, {'lat': 31.21259158, 'lng': 121.4265393, 'count': 89176.0}, {'lat': 31.20649684, 'lng': 121.4354038, 'count': 84422.0}, {'lat': 31.22153191, 'lng': 121.423821, 'count': 79304.5}, {'lat': 31.21738492, 'lng': 121.4337508, 'count': 91002.0}, {'lat': 31.21765484, 'lng': 121.438171, 'count': 95503.28571}, {'lat': 31.21962505, 'lng': 121.4426246, 'count': 144473.0}, {'lat': 31.1942542, 'lng': 121.3754222, 'count': 81973.0}, {'lat': 31.21566891, 'lng': 121.4344406, 'count': 91460.0}, {'lat': 31.24433889, 'lng': 121.4398294, 'count': 107648.0}, {'lat': 31.22282088, 'lng': 121.430049, 'count': 78008.0}, {'lat': 31.2263803, 'lng': 121.3764559, 'count': 78543.0}, {'lat': 31.22457181, 'lng': 121.3750299, 'count': 57575.0}, {'lat': 31.21794698, 'lng': 121.4410374, 'count': 92433.0}, {'lat': 31.23179543, 'lng': 121.4320074, 'count': 81498.0}, {'lat': 31.2319499, 'lng': 121.4318738, 'count': 84423.0}, {'lat': 0.0, 'lng': 0.0, 'count': 89577.0}, {'lat': 0.0, 'lng': 0.0, 'count': 82799.0}, {'lat': 0.0, 'lng': 0.0, 'count': 98016.0}, {'lat': 31.22198321, 'lng': 121.4300982, 'count': 77644.5}, {'lat': 31.22920338, 'lng': 121.4321474, 'count': 83500.33333}, {'lat': 31.21278685, 'lng': 121.3744976, 'count': 66547.0}, {'lat': 31.21835849, 'lng': 121.3729596, 'count': 72525.0}, {'lat': 31.203766, 'lng': 121.3999647, 'count': 68739.0}, {'lat': 31.25977503, 'lng': 121.5944547, 'count': 61607.5}, {'lat': 31.22628086, 'lng': 121.370099, 'count': 71135.66667}, {'lat': 31.20079986, 'lng': 121.4242246, 'count': 74013.0}, {'lat': 31.19928061, 'lng': 121.3767511, 'count': 65070.0}, {'lat': 31.22136669, 'lng': 121.4085646, 'count': 74692.33333}, {'lat': 31.20126557, 'lng': 121.4238988, 'count': 89113.0}, {'lat': 31.20466589, 'lng': 121.396884, 'count': 93980.33333}, {'lat': 31.22684797, 'lng': 121.4304544, 'count': 76457.0}, {'lat': 31.21840667, 'lng': 121.4232488, 'count': 79669.0}, {'lat': 31.19969189, 'lng': 121.4256781, 'count': 100147.0}, {'lat': 31.19802452, 'lng': 121.3896378, 'count': 77901.5}, {'lat': 31.19758597, 'lng': 121.4204713, 'count': 72572.0}, {'lat': 31.22244576, 'lng': 121.4169865, 'count': 78345.125}, {'lat': 31.29261706, 'lng': 121.5083614, 'count': 136755.0}, {'lat': 31.2168017, 'lng': 121.431795, 'count': 86723.5}, {'lat': 31.21149935, 'lng': 121.4149965, 'count': 74873.66667}, {'lat': 31.21519987, 'lng': 121.4182117, 'count': 61038.0}, {'lat': 31.27924565, 'lng': 121.4261008, 'count': 80081.0}, {'lat': 31.20302223, 'lng': 121.4039898, 'count': 78812.5}, {'lat': 31.19908292, 'lng': 121.4019512, 'count': 80203.5}, {'lat': 31.21254433, 'lng': 121.3827191, 'count': 78456.0}, {'lat': 31.21118201, 'lng': 121.539746, 'count': 71744.0}, {'lat': 31.21118201, 'lng': 121.539746, 'count': 61637.0}, {'lat': 31.21118201, 'lng': 121.539746, 'count': 60562.6}, {'lat': 31.20973644, 'lng': 121.3693146, 'count': 63733.0}, {'lat': 31.20860542, 'lng': 121.3700436, 'count': 60111.5}, {'lat': 31.21118201, 'lng': 121.539746, 'count': 61333.5}, {'lat': 31.20116287, 'lng': 121.402917, 'count': 84203.66667}, {'lat': 31.2166916, 'lng': 121.3989971, 'count': 69305.0}, {'lat': 31.21508336, 'lng': 121.4004043, 'count': 68479.6875}, {'lat': 31.21410767, 'lng': 121.3960221, 'count': 74003.66667}, {'lat': 31.22175109, 'lng': 121.4098814, 'count': 67937.0}, {'lat': 31.22990769, 'lng': 121.4310669, 'count': 86957.0}, {'lat': 31.2175635, 'lng': 121.3821148, 'count': 81866.0}, {'lat': 31.22357754, 'lng': 121.4356208, 'count': 100308.0}, {'lat': 31.22200261, 'lng': 121.4293452, 'count': 80850.0}, {'lat': 31.22198501, 'lng': 121.4171456, 'count': 71541.0}, {'lat': 31.22668052, 'lng': 121.4189372, 'count': 89686.0}, {'lat': 31.22518918, 'lng': 121.3715676, 'count': 82430.0}, {'lat': 48.09998439, 'lng': 125.7720537, 'count': 108742.3333}, {'lat': 31.21589583, 'lng': 121.3679359, 'count': 68094.0}, {'lat': 31.22118241, 'lng': 121.4008627, 'count': 124453.6667}, {'lat': 31.22024585, 'lng': 121.372911, 'count': 69422.0}, {'lat': 31.21774046, 'lng': 121.394607, 'count': 85542.0}, {'lat': 31.21965716, 'lng': 121.4225302, 'count': 90777.8}, {'lat': 31.1980578, 'lng': 121.4046111, 'count': 92688.66667}, {'lat': 31.22531888, 'lng': 121.410441, 'count': 99925.0}, {'lat': 31.19042883, 'lng': 121.362595, 'count': 56779.0}, {'lat': 31.22428084, 'lng': 121.4407917, 'count': 117537.9}, {'lat': 31.20886409, 'lng': 121.437338, 'count': 101126.0}, {'lat': 31.22482071, 'lng': 121.4204936, 'count': 104470.5}, {'lat': 31.21640686, 'lng': 121.436333, 'count': 72633.0}, {'lat': 31.22162409, 'lng': 121.3637156, 'count': 89572.0}, {'lat': 31.21438486, 'lng': 121.395836, 'count': 80574.28571}, {'lat': 31.16429797, 'lng': 121.3496919, 'count': 66923.5}, {'lat': 31.21881416, 'lng': 121.3647652, 'count': 66563.5}, {'lat': 31.21963995, 'lng': 121.3696704, 'count': 77337.0}, {'lat': 31.21857212, 'lng': 121.3692889, 'count': 69691.0}, {'lat': 31.21607487, 'lng': 121.4274021, 'count': 89650.0}, {'lat': 31.21845291, 'lng': 121.4291167, 'count': 81782.0}, {'lat': 31.21753532, 'lng': 121.401578, 'count': 72858.0}, {'lat': 31.21371128, 'lng': 121.4133332, 'count': 84207.92857}, {'lat': 31.22161228, 'lng': 121.3977016, 'count': 117533.25}, {'lat': 31.22241186, 'lng': 121.393642, 'count': 115754.0}, {'lat': 0.0, 'lng': 0.0, 'count': 79618.0}, {'lat': 31.21928658, 'lng': 121.4132884, 'count': 68547.16667}, {'lat': 31.21701672, 'lng': 121.4043868, 'count': 76893.5}, {'lat': 31.21701672, 'lng': 121.4043868, 'count': 79429.5}, {'lat': 31.21869387, 'lng': 121.393633, 'count': 106070.0}, {'lat': 31.23793484, 'lng': 121.455248, 'count': 113238.75}, {'lat': 31.21910847, 'lng': 121.3841454, 'count': 77299.0}, {'lat': 31.21810263, 'lng': 121.3891706, 'count': 91209.0}, {'lat': 31.12023962, 'lng': 121.2784527, 'count': 71925.0}, {'lat': 31.21772934, 'lng': 121.3971261, 'count': 73709.33333}, {'lat': 31.21391011, 'lng': 121.4109954, 'count': 84135.0}, {'lat': 31.20845416, 'lng': 121.4274436, 'count': 94716.0}, {'lat': 31.23097107, 'lng': 121.3659116, 'count': 76964.83333}, {'lat': 31.23299133, 'lng': 121.4294224, 'count': 78474.0}, {'lat': 31.2013946, 'lng': 121.3769765, 'count': 61388.5}, {'lat': 31.21241685, 'lng': 121.390908, 'count': 69369.0}, {'lat': 31.21486687, 'lng': 121.391483, 'count': 77237.0}, {'lat': 31.23632704, 'lng': 121.5168988, 'count': 77960.5}, {'lat': 31.2279194, 'lng': 121.424061, 'count': 103121.75}, {'lat': 31.20897751, 'lng': 121.4307558, 'count': 92337.0}, {'lat': 31.20907442, 'lng': 121.4287819, 'count': 93051.0}, {'lat': 31.22004859, 'lng': 121.4375186, 'count': 69213.0}, {'lat': 31.21819667, 'lng': 121.422169, 'count': 110236.0}, {'lat': 31.21839717, 'lng': 121.4280243, 'count': 81511.0}, {'lat': 31.21866021, 'lng': 121.4212387, 'count': 70787.0}, {'lat': 28.58338195, 'lng': 104.9184838, 'count': 74119.0}, {'lat': 31.21112372, 'lng': 121.3998088, 'count': 64885.0}, {'lat': 31.21105685, 'lng': 121.400496, 'count': 68172.5}, {'lat': 31.21365507, 'lng': 121.3930937, 'count': 77958.0}, {'lat': 31.2160111, 'lng': 121.3811418, 'count': 69926.0}, {'lat': 31.19217943, 'lng': 121.139137, 'count': 74691.0}, {'lat': 31.19890879, 'lng': 121.426638, 'count': 49868.0}, {'lat': 31.22847492, 'lng': 121.3727476, 'count': 67699.0}, {'lat': 31.18284944, 'lng': 121.4142966, 'count': 71348.0}, {'lat': 31.21972387, 'lng': 121.406941, 'count': 77668.5}, {'lat': 31.82711811, 'lng': 121.3019371, 'count': 111335.75}, {'lat': 31.21737095, 'lng': 121.4286989, 'count': 84923.0}, {'lat': 31.06418849, 'lng': 121.2939552, 'count': 100823.0}, {'lat': 31.21120278, 'lng': 121.4255839, 'count': 96677.0}, {'lat': 31.21209542, 'lng': 121.4359748, 'count': 98713.6}, {'lat': 31.21265721, 'lng': 121.4250747, 'count': 94494.0}, {'lat': 31.2093999, 'lng': 121.4276838, 'count': 94088.0}, {'lat': 31.22147254, 'lng': 121.379192, 'count': 71044.5}, {'lat': 31.21333789, 'lng': 121.3567289, 'count': 63348.0}, {'lat': 31.22636161, 'lng': 121.3734532, 'count': 69580.2}, {'lat': 31.22530359, 'lng': 121.3687984, 'count': 69379.88889}, {'lat': 31.22099982, 'lng': 121.3771644, 'count': 72373.11111}, {'lat': 31.22259931, 'lng': 121.3737934, 'count': 67677.2}, {'lat': 31.22362849, 'lng': 121.3730903, 'count': 67532.85714}, {'lat': 31.22381285, 'lng': 121.3776249, 'count': 66239.6}, {'lat': 31.20627315, 'lng': 121.3706856, 'count': 61485.66667}, {'lat': 31.27879359, 'lng': 121.4555705, 'count': 62990.0}, {'lat': 31.2679399, 'lng': 121.347084, 'count': 66405.0}, {'lat': 31.20445377, 'lng': 121.42624, 'count': 82439.8}, {'lat': 33.97927199, 'lng': 118.2822715, 'count': 115256.5}, {'lat': 31.21311391, 'lng': 121.3708498, 'count': 64103.0}, {'lat': 31.21420388, 'lng': 121.379222, 'count': 64127.0}, {'lat': 31.21558931, 'lng': 121.4372844, 'count': 84197.0}, {'lat': 31.22367327, 'lng': 121.431444, 'count': 101670.0}, {'lat': 31.224604, 'lng': 121.4361233, 'count': 98962.75}, {'lat': 31.22298347, 'lng': 121.4425301, 'count': 82028.0}, {'lat': 31.19877838, 'lng': 121.3910331, 'count': 71530.625}, {'lat': 31.2190352, 'lng': 121.4378676, 'count': 92120.0}, {'lat': 31.2132437, 'lng': 121.4230964, 'count': 80599.0}, {'lat': 31.21311754, 'lng': 121.4266891, 'count': 77434.0}, {'lat': 31.20719888, 'lng': 121.41472, 'count': 75619.0}, {'lat': 31.22206314, 'lng': 121.3793535, 'count': 88568.0}, {'lat': 31.215131, 'lng': 121.4313179, 'count': 77135.0}, {'lat': 31.23202763, 'lng': 121.4323364, 'count': 80113.0}, {'lat': 31.21387782, 'lng': 121.4272726, 'count': 64968.0}, {'lat': 31.21524473, 'lng': 121.379956, 'count': 67750.0}, {'lat': 31.20333744, 'lng': 121.4183254, 'count': 81531.4}, {'lat': 31.26321289, 'lng': 121.4766868, 'count': 99855.0}, {'lat': 31.21857282, 'lng': 121.4204778, 'count': 77592.0}, {'lat': 31.15466837, 'lng': 121.1826237, 'count': 76371.0}, {'lat': 31.21149101, 'lng': 121.4365819, 'count': 92858.5}, {'lat': 31.22513669, 'lng': 121.4367576, 'count': 120444.0}, {'lat': 31.21134076, 'lng': 121.4785403, 'count': 96292.0}, {'lat': 31.21830205, 'lng': 121.4186858, 'count': 69051.0}, {'lat': 31.26679986, 'lng': 121.513261, 'count': 80923.0}, {'lat': 31.21936093, 'lng': 121.4171757, 'count': 76061.4}, {'lat': 31.21917587, 'lng': 121.427704, 'count': 94315.5}, {'lat': 31.21387273, 'lng': 121.4319924, 'count': 90162.25}, {'lat': 31.19991784, 'lng': 121.3779816, 'count': 68352.4}, {'lat': 31.20407873, 'lng': 121.4147557, 'count': 97014.5}, {'lat': 31.22168407, 'lng': 121.4280952, 'count': 70137.8}, {'lat': 31.21858934, 'lng': 121.4381069, 'count': 99531.0}, {'lat': 31.23115194, 'lng': 121.4316369, 'count': 84894.5}, {'lat': 31.22274885, 'lng': 121.429686, 'count': 80194.0}, {'lat': 31.23041603, 'lng': 121.4332871, 'count': 80214.0}, {'lat': 31.22190186, 'lng': 121.416146, 'count': 81612.0}, {'lat': 31.22430161, 'lng': 121.4162481, 'count': 75981.0}, {'lat': 32.1446001, 'lng': 118.7314325, 'count': 82764.0}, {'lat': 31.22393483, 'lng': 121.4138457, 'count': 72797.25}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 89856.0}, {'lat': 31.23592904, 'lng': 121.4805389, 'count': 81412.0}, {'lat': 31.203989, 'lng': 121.424835, 'count': 80602.0}, {'lat': 31.22327954, 'lng': 121.4296091, 'count': 90276.0}, {'lat': 31.20146016, 'lng': 121.4262023, 'count': 84351.25}, {'lat': 31.21865921, 'lng': 121.4350392, 'count': 86013.2}, {'lat': 31.22363621, 'lng': 121.4256766, 'count': 84746.0}, {'lat': 31.22195923, 'lng': 121.4287921, 'count': 55630.0}, {'lat': 0.0, 'lng': 0.0, 'count': 85177.33333}, {'lat': 31.21020389, 'lng': 121.4388708, 'count': 82996.0}, {'lat': 31.22272924, 'lng': 121.4439263, 'count': 99977.0}, {'lat': 31.21904933, 'lng': 121.3900208, 'count': 98349.0}, {'lat': 31.20672285, 'lng': 121.420232, 'count': 71208.0}, {'lat': 31.2051396, 'lng': 121.4235475, 'count': 81944.0}, {'lat': 31.22439224, 'lng': 121.4158531, 'count': 83056.5}, {'lat': 22.52939104, 'lng': 113.376476, 'count': 103482.0}, {'lat': 31.21625036, 'lng': 121.4187582, 'count': 67959.0}, {'lat': 22.5474814, 'lng': 113.3894122, 'count': 81028.0}, {'lat': 31.22076512, 'lng': 121.4267388, 'count': 77295.0}, {'lat': 31.21309314, 'lng': 121.4171578, 'count': 76686.375}, {'lat': 31.20709186, 'lng': 121.420603, 'count': 75778.0}, {'lat': 31.21215557, 'lng': 121.4162508, 'count': 59166.5}, {'lat': 31.20488109, 'lng': 121.424829, 'count': 95688.0}, {'lat': 31.21240396, 'lng': 121.4167114, 'count': 61555.5}, {'lat': 31.36760192, 'lng': 121.1812516, 'count': 73102.4}, {'lat': 31.20173225, 'lng': 121.3990381, 'count': 75496.0}, {'lat': 31.22048263, 'lng': 121.4148097, 'count': 69920.5}, {'lat': 31.22043384, 'lng': 121.4151341, 'count': 67489.0}, {'lat': 31.22262595, 'lng': 121.4156767, 'count': 76676.0}];


	if(!isSupportCanvas()){
    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')
    }
	//详细的参数,可以查看heatmap.js的文档 https://github.com/pa7/heatmap.js/blob/master/README.md
	//参数说明如下:
	/* visible 热力图是否显示,默认为true
     * opacity 热力的透明度,1-100
     * radius 势力图的每个点的半径大小   
     * gradient  {JSON} 热力图的渐变区间 . gradient如下所示
     *	{
			.2:'rgb(0, 255, 255)',
			.5:'rgb(0, 110, 255)',
			.8:'rgb(100, 0, 255)'
		}
		其中 key 表示插值的位置, 0~1. 
		    value 为颜色值. 
     */
	heatmapOverlay = new BMapLib.HeatmapOverlay({"visible":true}, {"radius":1}, {"opacity":30});
	map.addOverlay(heatmapOverlay);
	heatmapOverlay.setDataSet({data:points,max:100000});
	//是否显示热力图
    function openHeatmap(){
        heatmapOverlay.show();
    }
	function closeHeatmap(){
        heatmapOverlay.hide();
    }
	closeHeatmap();
    function setGradient(){
     	/*格式如下所示:
		{
	  		
		}*/
     	var gradient = {
			0.2:'rgb(102, 255, 0)',
	 	 	0.5:'rgb(255, 170, 0)',
		  	0.2:'rgb(255, 0, 0)'
		 };
     	var colors = document.querySelectorAll("input[type='color']");
     	colors = [].slice.call(colors,0);
     	colors.forEach(function(ele){
			gradient[ele.getAttribute("data-key")] = ele.value; 
     	});
        heatmapOverlay.setOptions({"gradient":gradient});
    }
	//判断浏览区是否支持canvas
    function isSupportCanvas(){
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    }
</script>